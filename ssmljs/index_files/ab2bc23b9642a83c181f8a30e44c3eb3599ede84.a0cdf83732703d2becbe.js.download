(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{"0GtJ":function(e,t,n){e.exports={container:"CollapsableGroup_container__3TieT",limited:"CollapsableGroup_limited__1S4aK",button:"CollapsableGroup_button__Z9h6c"}},"3CLg":function(e,t,n){e.exports={container:"Comments_container__ZWYf_",inner:"Comments_inner__1cLgN",left30:"Comments_left30__38rZT",left40:"Comments_left40__1zCBF",right:"Comments_right__14mjx",sendButton:"Comments_sendButton__3AagK",header:"Comments_header__3FzOa",name:"Comments_name__136T2",handle:"Comments_handle__RJHQN",date:"Comments_date__KAgO5",content:"Comments_content__3oRNA",more:"Comments_more__Se7NW"}},"5F91":function(e,t,n){"use strict";var i=n("nKUr"),a=n("vJKn"),c=n.n(a),r=n("rg98"),o=n("xvhg"),s=n("z7pX"),l=n("cpVT"),d=n("gix7"),u=n("q1tI"),j=n("TSYQ"),b=n.n(j),v=n("k7rU"),f=n("7rV/"),m=n.n(f),h=function(e){var t=e.userLikes;return Object(i.jsxs)("svg",{width:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:m.a.likeButton,children:[Object(i.jsx)("mask",{id:"like-button-mask",fill:"white",children:Object(i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.5 21C10 21 3 15 3 10C3 6.96243 5.46243 4 8.5 4C10.2434 4 11.6327 4.81119 12.5 6.07673C13.3673 4.81119 14.7566 4 16.5 4C19.5376 4 22 6.96243 22 10C22 15 15 21 12.5 21Z"})}),Object(i.jsx)("path",{className:"".concat(t?m.a.innerLiked:m.a.inner),fillRule:"evenodd",clipRule:"evenodd",d:"M12.5 21C10 21 3 15 3 10C3 6.96243 5.46243 4 8.5 4C10.5165 4 11.8389 5.08522 12.5 6.7035C13.1611 5.08522 14.4835 4 16.5 4C19.5376 4 22 6.96243 22 10C22 15 15 21 12.5 21Z",fill:"#e14d4d"}),Object(i.jsx)("path",{className:"".concat(t?m.a.outerLiked:m.a.outer),d:"M12.5 6.07673L11.1802 6.98123L12.5 8.90703L13.8198 6.98123L12.5 6.07673ZM12.5 19.4C12.5012 19.4 12.4896 19.4 12.4636 19.3966C12.4378 19.3932 12.4015 19.3868 12.354 19.3754C12.2574 19.3523 12.1305 19.3123 11.9729 19.2487C11.6552 19.1205 11.2644 18.9171 10.8193 18.6341C9.92913 18.0683 8.9155 17.2445 7.96063 16.2606C5.97345 14.2132 4.6 11.8538 4.6 10H1.4C1.4 13.1462 3.52655 16.2868 5.66437 18.4894C6.772 19.6305 7.97712 20.6192 9.10261 21.3347C9.66527 21.6923 10.2315 21.9967 10.7752 22.2161C11.2993 22.4277 11.8988 22.6 12.5 22.6V19.4ZM4.6 10C4.6 7.66289 6.51878 5.6 8.5 5.6V2.4C4.40608 2.4 1.4 6.26198 1.4 10H4.6ZM8.5 5.6C9.69911 5.6 10.6017 6.1371 11.1802 6.98123L13.8198 5.17224C12.6637 3.48528 10.7878 2.4 8.5 2.4V5.6ZM16.5 2.4C14.2122 2.4 12.3363 3.48529 11.1802 5.17224L13.8198 6.98123C14.3983 6.1371 15.3009 5.6 16.5 5.6V2.4ZM23.6 10C23.6 6.26198 20.5939 2.4 16.5 2.4V5.6C18.4812 5.6 20.4 7.66289 20.4 10L23.6 10ZM12.5 22.6C13.1012 22.6 13.7007 22.4277 14.2248 22.2161C14.7685 21.9967 15.3347 21.6923 15.8974 21.3347C17.0229 20.6192 18.228 19.6305 19.3356 18.4894C21.4735 16.2868 23.6 13.1462 23.6 10L20.4 10C20.4 11.8538 19.0265 14.2132 17.0394 16.2606C16.0845 17.2445 15.0709 18.0683 14.1807 18.6341C13.7356 18.9171 13.3448 19.1205 13.0271 19.2487C12.8695 19.3123 12.7426 19.3523 12.646 19.3754C12.5985 19.3868 12.5622 19.3932 12.5364 19.3966C12.5104 19.4 12.4988 19.4 12.5 19.4V22.6Z",fill:"black",mask:"url(#like-button-mask)"})]})},O=function(e){var t=e.likesCount,n=e.userLikes,a=e.handleLikeClick,c=e.isDisabled,r=t>0?"".concat(t," like").concat(1===t?"":"s"):"Like";return Object(i.jsx)(v.a,{onClick:a,disabled:c,icon:Object(i.jsx)(h,{userLikes:n}),children:r})},p=n("BT7n"),x=function(e){var t=e.commentsCount,n=e.handleClick,a=e.isLoading,c=e.isActive,r=t>0?"".concat(t," comment").concat(1===t?"":"s"):"Comment";return Object(i.jsx)(v.a,{onClick:n,disabled:a,isActive:c,icon:Object(i.jsx)(p.a,{}),children:r})},_=n("dhJC"),C=n("YFqc"),k=n.n(C),g=n("NKCw"),y=n("gCnf"),w=n("GTQI"),L=n("4SLk"),N=n("8dOY"),S=n("3CLg"),B=n.n(S);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){var t=e.children;return Object(i.jsx)("div",{className:B.a.container,children:t})},P=function(e){var t=e.profile,n=e.onSubmit,a=Object(g.b)(),o=a.register,s=a.handleSubmit,l=a.setValue,d=a.watch,u=a.formState.isDirty,j=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:l("text","");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=d("text");return Object(i.jsxs)("div",{className:B.a.inner,children:[Object(i.jsx)("div",{className:b()("pt-1",B.a.left40),children:Object(i.jsx)(y.a,{profile:t,width:40})}),Object(i.jsxs)("form",{className:B.a.right,onSubmit:s(j),children:[Object(i.jsx)(N.c,{id:"text",placeholder:"Share your thoughts...",ref:o,name:"text"}),u&&Object(i.jsx)("div",{className:B.a.sendButton,children:Object(i.jsx)(L.a,{type:"submit",variant:"focus",disabled:""===v,children:"Post"})})]})]})},T=function(e){var t,n=e.comment;return null!==n&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.profile&&n.created_at?Object(i.jsxs)("div",{className:B.a.inner,children:[Object(i.jsx)("div",{className:b()("pt-1",B.a.left30),children:Object(i.jsx)(y.a,{profile:n.data.profile,width:30})}),Object(i.jsxs)("div",{className:B.a.right,children:[Object(i.jsxs)("div",{className:B.a.header,children:[Object(i.jsxs)("span",{children:[Object(i.jsx)(k.a,{href:"/[handle]",as:"/".concat(n.data.profile.handle),children:Object(i.jsx)("a",{className:B.a.name,children:n.data.profile.name})}),Object(i.jsxs)("span",{className:B.a.handle,children:["@",n.data.profile.handle]})]}),Object(i.jsx)(w.d,{date:n.created_at})]}),Object(i.jsx)("div",{className:B.a.content,children:n.data.text})]})]}):null},D=function(e){var t=e.count,n=Object(_.a)(e,["count"]);return Object(i.jsxs)("button",R(R({className:B.a.more},n),{},{children:["Show all ",t," comments"]}))},F=n("urpP"),V=n.n(F),Z=function(e){var t,n,a,c=e.profile,r=e.activity,o=e.userLikes,s=e.handleLikeClick,d=e.isLikeLoading,j=e.handleInputSubmit,v=e.isAuthenticated,f=e.isCommentLoading,m=e.optionsButton,h=void 0===m?null:m,p=(null===r||void 0===r||null===(t=r.reaction_counts)||void 0===t?void 0:t.comment)||0,_=(null===r||void 0===r||null===(n=r.reaction_counts)||void 0===n?void 0:n.like)||0,C=Object(u.useState)(!1),k=C[0],g=C[1],y=Object(u.useState)(2),w=y[0],L=y[1];return Object(u.useEffect)((function(){p>0&&g(!0)}),[p]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:b()(V.a.container,Object(l.a)({},V.a.commentsOpen,k)),children:[Object(i.jsxs)("div",{className:V.a.leftColumn,children:[Object(i.jsx)(O,{likesCount:_,userLikes:o,handleLikeClick:s,isDisabled:!v||d}),Object(i.jsx)(x,{commentsCount:p||0,handleClick:function(){return g((function(e){return!e}))},isActive:k})]}),v&&null!==h&&h]}),k&&Object(i.jsxs)(I,{children:[p>2&&w<p&&Object(i.jsx)(D,{onClick:function(){return L(p)},count:p,disabled:f}),(null===r||void 0===r||null===(a=r.latest_reactions)||void 0===a?void 0:a.comment)&&r.latest_reactions.comment.slice(0,w).reverse().map((function(e){return Object(i.jsx)(T,{comment:e},null===e||void 0===e?void 0:e.id)})),v&&c&&Object(i.jsx)(P,{profile:c,onSubmit:j})]})]})},H=n("ihkx"),Q=n("MjsB"),q=function(e){var t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)},E=n("YDST"),M=n("mOvS"),G=n.n(M),K=n("rBoR"),Y=n("BPjB"),U=n("phkl"),z=n("SIxx"),J=n("Hn/8"),W=n("Gl2D"),X=function(e){var t=e.color,n=void 0===t?"currentColor":t;return Object(i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(i.jsx)("path",{d:"M7.18121 9.70753C6.81898 6.80963 9.07857 4.25 11.999 4.25V4.25C14.9195 4.25 17.1791 6.80963 16.8168 9.70753L16.5177 12.1005C16.5056 12.1974 16.5263 12.2955 16.5765 12.3792L18.5903 15.7355C18.9902 16.402 18.5101 17.25 17.7328 17.25H6.26521C5.48792 17.25 5.00781 16.402 5.40772 15.7355L7.4215 12.3792C7.47173 12.2955 7.49244 12.1974 7.48033 12.1005L7.18121 9.70753Z",stroke:n,strokeWidth:"1.6",strokeLinecap:"round"}),Object(i.jsx)("path",{d:"M14.499 17.25C14.499 18.6307 13.3797 19.75 11.999 19.75C10.6183 19.75 9.49902 18.6307 9.49902 17.25",stroke:n,strokeWidth:"1.6",strokeLinecap:"round"}),Object(i.jsx)("line",{x1:"3.99902",y1:"19.8686",x2:"19.8677",y2:"4",stroke:n,strokeWidth:"1.6",strokeLinecap:"round"})]})},$=G()().publicRuntimeConfig,ee=function(e){var t=e.activityId,n=e.additionalOptions,a=Object(u.useState)(!0),s=a[0],l=a[1],j=Object(d.Z)({variables:{activityId:t}}).data,b=Object(d.rb)(),v=Object(o.a)(b,1)[0];Object(u.useEffect)((function(){j&&l(j.isSubscribedToActivityUpdates)}),[j]);var f=function(){var e=Object(r.a)(c.a.mark((function e(){var n,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({variables:{activityId:t,isSubscribed:!s}});case 2:n=e.sent,(i=n.data)&&l(i.setActivitySubscription);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)(Y.a,{button:Object(i.jsx)(J.a,{}),positioningStrategy:"fixed",size:"L",children:[n,Object(i.jsx)(U.a,{name:"Copy link to this activity",onClick:function(){return function(e){window.isSecureContext&&navigator.clipboard.writeText("".concat($.urlBase,"/activity/").concat(e))}(t)}}),Object(i.jsx)(z.a,{full:!0}),Object(i.jsx)(K.a,{name:s?"Turn off notifications for this activity":"Turn on notifications for this activity",icon:s?Object(i.jsx)(X,{}):Object(i.jsx)(W.a,{}),onClick:f})]})},te=n("95Q5");function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ae=function(e,t){var n,i,a;return{likeActivity:ie(ie({},e),{},{reaction_counts:{comment:null===(n=e.reaction_counts)||void 0===n?void 0:n.comment,like:null!==(i=e.reaction_counts)&&void 0!==i&&i.like?e.reaction_counts.like+1:0,__typename:"ReactionCounts"},latest_reactions:{comment:null===(a=e.latest_reactions)||void 0===a?void 0:a.comment,like:[].concat(Object(s.a)(e.latest_reactions&&e.latest_reactions.like?e.latest_reactions.like:[]),[{id:"temp",activity_id:"temp",user_id:t,kind:"like",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),__typename:"ActivityReaction"}]),__typename:"LatestReactions"}})}},ce=function(e,t){var n,i,a,c=(e.latest_reactions&&e.latest_reactions.like?e.latest_reactions.like:[]).filter((function(e){return(null===e||void 0===e?void 0:e.user_id)!==t}));return{unlikeActivity:ie(ie({},e),{},{reaction_counts:{comment:null===(n=e.reaction_counts)||void 0===n?void 0:n.comment,like:null!==(i=e.reaction_counts)&&void 0!==i&&i.like?e.reaction_counts.like-1:0,__typename:"ReactionCounts"},latest_reactions:{comment:null===(a=e.latest_reactions)||void 0===a?void 0:a.comment,like:c,__typename:"LatestReactions"}})}};t.a=function(e){var t,n,a=e.activity,s=Object(Q.a)().trackEvent,l=Object(H.b)(),u=l.isAuthenticated,j=l.profile,b=Object(d.ab)(),v=Object(o.a)(b,2),f=v[0],m=v[1].loading,h=Object(d.tb)(),O=Object(o.a)(h,2),p=O[0],x=O[1].loading,_=Object(d.v)(),C=Object(o.a)(_,2),k=C[0],g=C[1].loading,y=(null===(t=a.latest_reactions)||void 0===t||null===(n=t.like)||void 0===n?void 0:n.some((function(e){return j&&(null===e||void 0===e?void 0:e.user_id)===j.id})))||!1,w=function(){var e=Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.id){e.next=2;break}return e.abrupt("return");case 2:if(j){e.next=4;break}return e.abrupt("return");case 4:if(!y){e.next=11;break}return t=ce(a,j.id),e.next=8,p({variables:{activityId:a.id},optimisticResponse:t});case 8:s("unliked",{object:q(a.object_type||"")}),e.next=15;break;case 11:return n=ae(a,j.id),e.next=14,f({variables:{activityId:a.id},optimisticResponse:n});case 14:s("liked",{object:q(a.object_type||"")});case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsx)("div",{children:Object(i.jsx)(Z,{activity:a,userLikes:y,handleLikeClick:w,isLikeLoading:m||x,profile:j||void 0,isAuthenticated:u,handleInputSubmit:function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.text||!a.id){e.next=4;break}return e.next=3,k({variables:{activityId:a.id,text:t.text},refetchQueries:function(){return[{query:d.m,variables:{activityId:a.id}}]}});case 3:s("commented",{object:q(a.object_type||"")});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isCommentLoading:g,optionsButton:a.id&&a.data&&Object(i.jsx)(ee,{activityId:a.id,additionalOptions:Object(te.f)(a)?Object(i.jsx)(E.a,{moment:a.data,profile:a.data.profile,book:a.data.book}):void 0})})})}},"7qtI":function(e,t,n){e.exports={container:"Activity_container__TCJu0",content:"Activity_content__1ktPW",header:"Activity_header__znRXQ",avatar:"Activity_avatar__2igj-",info:"Activity_info__3WfCd",text:"Activity_text__nzFzm",date:"Activity_date__3iLQT",name:"Activity_name__3tCEg"}},"7rV/":function(e,t,n){e.exports={likeButton:"LikeButton_likeButton__1uGDj",outer:"LikeButton_outer__3bQg9",innerLiked:"LikeButton_innerLiked__3aask",outerRed:"LikeButton_outerRed__3MuBQ",inner:"LikeButton_inner__Zb1xK",outerLiked:"LikeButton_outerLiked__3IH_h"}},"8dOY":function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return h}));var i=n("nKUr"),a=n("cpVT"),c=n("dhJC"),r=n("TSYQ"),o=n.n(r),s=n("q1tI"),l=n("z430"),d=n("qcQQ"),u=n("mccG"),j=n.n(u);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=Object(s.forwardRef)((function(e,t){var n=e.placeholder,a=e.name,r=e.id,s=e.label,l=e.disabled,u=void 0!==l&&l,b=e.value,f=e.setValue,m=void 0===f?d.a:f,h=Object(c.a)(e,["placeholder","name","id","label","disabled","value","setValue"]);return Object(i.jsxs)("div",{className:j.a.inputContainer,children:[s&&Object(i.jsx)(O,{children:s}),Object(i.jsx)("input",v(v({id:r,name:a,placeholder:n,ref:t,className:o()("uiBase",j.a.input),disabled:u,type:"text"},void 0!==b&&{onChange:function(e){m(e.target.value)},value:b}),h))]})}));f.displayName="Input";var m=Object(s.forwardRef)((function(e,t){var n=e.placeholder,a=e.name,r=e.id,s=e.label,l=e.disabled,u=void 0!==l&&l,b=e.value,f=e.setValue,m=void 0===f?d.a:f,h=Object(c.a)(e,["placeholder","name","id","label","disabled","value","setValue"]);return Object(i.jsxs)("div",{className:j.a.inputContainer,children:[s&&Object(i.jsx)(O,{children:s}),Object(i.jsx)("textarea",v(v({id:r,name:a,placeholder:n,ref:t,className:o()("uiBase",j.a.input,j.a.textarea),disabled:u},void 0!==b&&{onChange:function(e){m(e.target.value)},value:b}),h))]})}));m.displayName="TextArea";var h=Object(s.forwardRef)((function(e,t){var n=e.placeholder,a=e.name,r=e.id,s=e.label,u=e.disabled,b=void 0!==u&&u,f=e.value,m=e.setValue,h=void 0===m?d.a:m,p=Object(c.a)(e,["placeholder","name","id","label","disabled","value","setValue"]);return Object(i.jsxs)("div",{className:j.a.inputContainer,children:[s&&Object(i.jsx)(O,{children:s}),Object(i.jsx)(l.a,v(v({id:r,name:a,placeholder:n,ref:t,className:o()("uiBase",j.a.input,j.a.textarea,j.a.autoexpand),disabled:b},void 0!==f&&{onChange:function(e){h(e.target.value)},value:f}),p))]})}));h.displayName="TextAreaAutoExpand";var O=function(e){var t=e.id,n=e.children,a=Object(c.a)(e,["id","children"]);return Object(i.jsx)("label",v(v({className:j.a.label,htmlFor:t},a),{},{children:n}))};O.displayName="Label"},BT7n:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("nKUr"),a=function(e){var t=e.color,n=void 0===t?"currentColor":t;return Object(i.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(i.jsx)("path",{d:"M4 6C4 5.44772 4.44772 5 5 5H19C19.5523 5 20 5.44772 20 6V16C20 16.5523 19.5523 17 19 17H17.25C16.6977 17 16.25 17.4477 16.25 18V20.4626C16.25 20.6752 16.0016 20.7908 15.839 20.6539L11.7792 17.2351C11.5989 17.0833 11.3707 17 11.135 17H5C4.44772 17 4 16.5523 4 16V6Z",stroke:n,strokeWidth:"1.6"})})}},DSQ4:function(e,t,n){"use strict";n.d(t,"c",(function(){return j})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return v}));var i=n("nKUr"),a=n("YFqc"),c=n.n(a),r=n("20a2"),o=n("GTQI"),s=n("Zlg1"),l=n("8YUc"),d=n("7qtI"),u=n.n(d),j=function(e){var t=e.profile,n=e.text,a=e.date,d=e.dateHref,j=e.dateAs,b=Object(r.useRouter)();return Object(i.jsxs)("div",{className:u.a.header,children:[Object(i.jsx)("div",{className:u.a.avatar,children:Object(i.jsx)(c.a,{href:"/[handle]",as:"/".concat(t.handle),children:Object(i.jsx)("a",{children:Object(i.jsx)(s.a,{profile:t})})})}),Object(i.jsxs)("div",{className:u.a.info,children:[Object(i.jsxs)("div",{className:u.a.text,children:[Object(i.jsx)(l.b,{variant:"bold",onClick:function(){return b.push("/".concat(t.handle))},children:Object(i.jsxs)("span",{children:[t.name,"\xa0"]})}),Object(i.jsx)("span",{children:n})]}),Object(i.jsx)("div",{className:u.a.date,children:d&&j?Object(i.jsx)(c.a,{href:d,as:j,passHref:!0,children:Object(i.jsx)(o.c,{date:a})}):Object(i.jsx)(o.b,{date:a})})]})]})},b=function(e){var t=e.children;return Object(i.jsx)("div",{className:u.a.container,children:t})},v=function(e){var t=e.children;return Object(i.jsx)("div",{className:u.a.content,children:t})}},Gl2D:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("nKUr"),a=function(e){var t=e.color,n=void 0===t?"currentColor":t;return Object(i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.2928 11.7832L19.8896 13.3271C20.8954 14.2997 20.4557 15.9977 19.1042 16.3598L8.02737 19.3278C6.67591 19.69 5.44611 18.4393 5.83091 17.0941L6.87289 13.4516L6.01188 11.3339C4.73072 8.18268 6.5013 4.62171 9.78705 3.7413C10.772 3.47738 11.7595 3.49014 12.6721 3.7282C12.4651 4.21287 12.3224 4.7315 12.2546 5.27341C11.6045 5.10655 10.9019 5.09901 10.2012 5.28678C7.84502 5.91811 6.57537 8.47161 7.49406 10.7312L8.40233 12.9652C8.50649 13.2214 8.52175 13.5051 8.44569 13.771L7.36921 17.5342C7.32645 17.6836 7.4631 17.8226 7.61326 17.7824L18.6901 14.8143C18.8403 14.7741 18.8891 14.5854 18.7774 14.4774L15.9636 11.7566C15.8304 11.6279 15.7287 11.4717 15.6647 11.3003C16.379 11.6155 17.169 11.7905 17.9999 11.7905C18.0981 11.7905 18.1958 11.788 18.2928 11.7832Z",fill:n}),Object(i.jsx)("path",{d:"M14.3247 16.8123C14.6821 18.146 13.8906 19.5168 12.557 19.8742C11.2233 20.2315 9.85247 19.44 9.49512 18.1064",stroke:n,strokeWidth:"1.6",strokeLinecap:"round"}),Object(i.jsx)("circle",{cx:"18",cy:"6",r:"4",fill:"#E14D4D"})]})};t.b=a},NH5w:function(e,t,n){"use strict";var i=n("nKUr"),a=n("q1tI"),c=n("4SLk"),r=n("0GtJ"),o=n.n(r);t.a=function(e){var t=e.children,n=e.buttonText,r=void 0===n?"Show all activities":n,s=e.height,l=void 0===s?588:s,d=Object(a.useState)(!1),u=d[0],j=d[1],b=Object(a.useState)(!1),v=b[0],f=b[1],m=Object(a.useRef)(null);return Object(a.useEffect)((function(){m.current&&m.current.scrollHeight>l&&f(!0)}),[m.current]),Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"".concat(o.a.container," ").concat(v&&!u?o.a.limited:""),ref:m,style:{maxHeight:"".concat(u?"none":"".concat(l,"px"))},children:[t,v&&!u&&Object(i.jsx)("div",{className:o.a.button,children:Object(i.jsx)(c.a,{mini:!0,onClick:function(){return j((function(e){return!e}))},children:r})})]})})}},ZiPH:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("nKUr"),a=n("cpVT"),c=n("V4Io"),r=n("DSQ4"),o=n("PVzJ"),s=n("NH5w"),l=n("5F91"),d=n("TSYQ"),u=n.n(d),j=n("95Q5"),b=function(e){var t=e.activities,n=e.hideBook;return Object(i.jsx)(i.Fragment,{children:t.map((function(e,r){var s,d,b;if(!e.data)return null;var v="/".concat(e.data.profile.handle,"/book/").concat(e.data.book.slug);return Object(i.jsxs)("div",{className:u()(Object(a.a)({},"mb-8",r<t.length-1)),children:[Object(i.jsx)(o.a,{moment:e.data,gradientColors:null===(d=e.data)||void 0===d||null===(b=d.book.gradientColors)||void 0===b?void 0:b.filter(j.k)},null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.id),!n&&Object(i.jsx)("div",{className:"mt-4",children:Object(i.jsx)(c.a,{book:e.data.book,href:"/[handle]/book/[bookSlug]",as:v})}),Object(i.jsx)("div",{className:"mt-4",children:Object(i.jsx)(l.a,{activity:e})})]},e.id)}))})};t.b=function(e){var t,n=e.activityGroup,a=e.hideBook,c=(null===(t=n.activities)||void 0===t?void 0:t.filter((function(e){return Boolean(e.data)})))||[],o=null===c||void 0===c?void 0:c.map((function(e){return e.data})).filter(j.k);if(!o||0===(null===o||void 0===o?void 0:o.length))return null;var l=o[0].profile,d="Show all ".concat(n.activity_count," moments");return 1===n.activity_count&&(d="Show more"),1===c.length?Object(i.jsxs)(r.a,{children:[Object(i.jsx)(r.c,{profile:l,date:o[0].createdAt,text:Object(i.jsxs)(i.Fragment,{children:["created ",1===o.length?"a moment ":"".concat(n.activity_count," moments")]}),dateHref:"/activity/[activityId]",dateAs:"/activity/".concat(c[0].id)}),Object(i.jsx)(r.b,{children:Object(i.jsx)(b,{activities:c,hideBook:a})})]}):Object(i.jsx)(r.a,{children:Object(i.jsxs)(s.a,{buttonText:d,height:300,children:[Object(i.jsx)(r.c,{profile:l,date:o[0].createdAt,text:Object(i.jsxs)(i.Fragment,{children:["created ",1===o.length?"a moment ":"".concat(n.activity_count," moments")]}),dateHref:"/activity/[activityId]",dateAs:"/activity/".concat(c[0].id)}),Object(i.jsx)(r.b,{children:Object(i.jsx)(b,{activities:c,hideBook:a})})]})})}},gCnf:function(e,t,n){"use strict";var i=n("nKUr"),a=n("q1tI"),c=n("YFqc"),r=n.n(c),o=n("Zlg1"),s=Object(a.forwardRef)((function(e,t){var n=e.profile,a=e.width;return Object(i.jsx)(r.a,{href:"/[handle]",as:"/".concat(n.handle),children:Object(i.jsx)("a",{ref:t,children:Object(i.jsx)(o.a,{profile:n,width:a})})})}));s.displayName="AvatarLink",t.a=s},kJml:function(e,t,n){e.exports={container:"Review_container__2ddGv",tagsContainer:"Review_tagsContainer__3HsQL",reviewBody:"Review_reviewBody__9K6fc",reviewBodyContainer:"Review_reviewBodyContainer__2-Ike",stickers:"Review_stickers__2ZFAq",coverInner:"Review_coverInner__1wE91"}},mccG:function(e,t,n){e.exports={inputContainer:"FormFields_inputContainer__P4rsD",input:"FormFields_input__jWQq6",textarea:"FormFields_textarea__3a0ry",autoexpand:"FormFields_autoexpand__1ZzdS",label:"FormFields_label__1Zf7H"}},mxUG:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i=n("nKUr"),a=n("TSYQ"),c=n.n(a),r=n("GTQI"),o=n("8cCV"),s=n("vds2"),l=n("N/5/"),d=n("YFqc"),u=n.n(d),j=n("q1tI"),b=n("95Q5"),v=n("TEdz"),f=n("kqEe"),m=n("kJml"),h=n.n(m),O=n("/oYa"),p=n("7zTf"),x=function(e){var t,n=e.review,a=e.book,d=e.profile,m=e.showBookCover,x=void 0!==m&&m,_=e.linkBookCover,C=void 0!==_&&_,k=e.momentsCount;if(!a||!n||!d)return null;var g=Object(j.useMemo)((function(){if(n.text)return n.text.split("\n")}),[n.text]),y=Object(j.useMemo)((function(){return n.tags?Object(p.b)(n.tags):[]}),[n.tags]),w=Object(j.useCallback)((function(){return C?Object(i.jsx)(u.a,{href:"/[handle]/book/[bookSlug]",as:"/".concat(d.handle,"/book/").concat(a.slug),children:Object(i.jsx)("a",{children:Object(i.jsx)(v.a,{book:a})})}):Object(i.jsx)(v.a,{book:a})}),[x,C,a,d]);return Object(i.jsxs)("div",{className:c()(h.a.container,"my-4"),children:[x&&Object(i.jsxs)("div",{className:h.a.coverInner,children:[w(),Object(i.jsx)("div",{className:h.a.stickers,children:Object(i.jsx)(f.a,{count:k,gradientColors:null===(t=a.gradientColors)||void 0===t?void 0:t.filter(b.k)})})]}),Object(i.jsxs)("h3",{className:"sectionHeader italic",id:n.id,children:[d.name,"'s review of"]}),Object(i.jsxs)("h3",{className:"sectionHeader",style:{marginBottom:10},children:[a.title,Object(i.jsx)("i",{children:" by "}),a.authors[0].name]}),Object(i.jsx)(l.a,{text:"".concat(n.rating," ").concat(1===n.rating?"star":"stars"),render:function(e){return Object(i.jsx)(o.a,{ref:e,initValue:n.rating,className:"my-4"})}}),Object(i.jsx)(u.a,{href:"/[handle]/book/[bookSlug]",as:"/".concat(d.handle,"/book/").concat(a.slug,"#").concat(n.id),children:Object(i.jsx)("a",{children:Object(i.jsx)(r.d,{date:n.createdAt})})}),Object(i.jsx)("div",{className:h.a.tagsContainer,children:y&&y.length>0&&y.map((function(e){return Object(i.jsx)(O.a,{tag:e,isActive:!0},e.value)}))}),Object(i.jsx)("div",{className:h.a.reviewBodyContainer,children:n.text&&Object(i.jsx)(s.a,{hideIt:n.spoiler,text:"review",children:Object(i.jsx)("div",{className:c()("body-large","mt-4",h.a.reviewBody),children:g&&g.map((function(e,t){return Object(i.jsx)("p",{className:"pb-2",children:e},t)}))})})})]})}},urpP:function(e,t,n){e.exports={container:"ReactionBar_container__3BWfq",commentsOpen:"ReactionBar_commentsOpen__3YsrX",leftColumn:"ReactionBar_leftColumn__W0qHz"}}}]);
//# sourceMappingURL=ab2bc23b9642a83c181f8a30e44c3eb3599ede84.a0cdf83732703d2becbe.js.map